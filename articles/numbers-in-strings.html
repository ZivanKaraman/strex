<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Numbers Within Strings • strex</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Numbers Within Strings">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">strex</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/alphordering-numbers.html">Alphordering Numbers</a>
    </li>
    <li>
      <a href="../articles/argument-matching.html">Argument Matching</a>
    </li>
    <li>
      <a href="../articles/before-and-after.html">Before and After</a>
    </li>
    <li>
      <a href="../articles/important-miscellany.html">Important Miscellany</a>
    </li>
    <li>
      <a href="../articles/numbers-in-strings.html">Numbers Within Strings</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rorynolan/strex">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Numbers Within Strings</h1>
            
            <h4 class="date">2019-08-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rorynolan/strex/blob/master/vignettes/numbers-in-strings.Rmd"><code>vignettes/numbers-in-strings.Rmd</code></a></small>
      <div class="hidden name"><code>numbers-in-strings.Rmd</code></div>

    </div>

    
    
<div id="a-common-way-to-encode-numerical-data" class="section level1">
<h1 class="hasAnchor">
<a href="#a-common-way-to-encode-numerical-data" class="anchor"></a>A common way to encode numerical data</h1>
<p>It’s common for a lot of numerical information to be encoded in strings, particularly in file names. Consider a series of microscope images of cells from different patients detailing the patient number, the cell number and the number of hours after biopsy that the image was taken. They might be named like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">img_names</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt;  [1] "patient1-cell1-0hours-after-biopsy.tif"  </span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt;  [2] "patient1-cell1-2.5hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt;  [3] "patient1-cell2-0hours-after-biopsy.tif"  </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt;  [4] "patient1-cell2-2.5hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;  [5] "patient1-cell3-0hours-after-biopsy.tif"  </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt;  [6] "patient1-cell3-2.5hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt;  [7] "patient2-cell1-0hours-after-biopsy.tif"  </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt;  [8] "patient2-cell1-2.5hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;  [9] "patient2-cell2-0hours-after-biopsy.tif"  </span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; [10] "patient2-cell2-2.5hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; [11] "patient2-cell3-0hours-after-biopsy.tif"  </span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; [12] "patient2-cell3-2.5hours-after-biopsy.tif"</span></a></code></pre></div>
</div>
<div id="all-of-the-numbers" class="section level1">
<h1 class="hasAnchor">
<a href="#all-of-the-numbers" class="anchor"></a>All of the numbers</h1>
<p>For some crude reason, you might just want all of the numbers:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(strex)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="../reference/str_extract_numbers.html">str_extract_numbers</a></span>(img_names)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; [1] 1 1 0</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; [1] 1 1 2 5</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; [1] 1 2 0</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; [1] 1 2 2 5</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; [1] 1 3 0</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; [[6]]</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; [1] 1 3 2 5</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; [[7]]</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; [1] 2 1 0</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; [[8]]</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; [1] 2 1 2 5</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; [[9]]</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; [1] 2 2 0</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; [[10]]</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt; [1] 2 2 2 5</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt; [[11]]</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt; [1] 2 3 0</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"><span class="co">#&gt; [[12]]</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="co">#&gt; [1] 2 3 2 5</span></a></code></pre></div>
<p>It seems to have missed the fact that 2.5 is a number and not two numbers 2 and 5. This is because the default is <code>decimals = FALSE</code>. To recognise decimals, set <code>decimals = TRUE</code>. Also note that there is no option to recognise scientific notation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/str_extract_numbers.html">str_extract_numbers</a></span>(img_names, <span class="dt">decimals =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1] 1 1 0</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; [1] 1.0 1.0 2.5</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; [1] 1 2 0</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; [1] 1.0 2.0 2.5</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; [1] 1 3 0</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; [[6]]</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; [1] 1.0 3.0 2.5</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; [[7]]</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; [1] 2 1 0</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; [[8]]</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; [1] 2.0 1.0 2.5</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; [[9]]</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; [1] 2 2 0</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; [[10]]</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; [1] 2.0 2.0 2.5</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; [[11]]</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; [1] 2 3 0</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; [[12]]</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co">#&gt; [1] 2.0 3.0 2.5</span></a></code></pre></div>
<p>It’s also possible to extract the non-numeric parts of the strings:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/str_extract_non_numerics.html">str_extract_non_numerics</a></span>(img_names, <span class="dt">decimals =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; [[5]]</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; [[6]]</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; [[7]]</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; [[8]]</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; [[9]]</span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-38" data-line-number="38"><span class="co">#&gt; [[10]]</span></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-42" data-line-number="42"><span class="co">#&gt; [[11]]</span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a>
<a class="sourceLine" id="cb4-45" data-line-number="45"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-46" data-line-number="46"><span class="co">#&gt; [[12]]</span></a>
<a class="sourceLine" id="cb4-47" data-line-number="47"><span class="co">#&gt; [1] "patient"                "-cell"                 </span></a>
<a class="sourceLine" id="cb4-48" data-line-number="48"><span class="co">#&gt; [3] "-"                      "hours-after-biopsy.tif"</span></a></code></pre></div>
</div>
<div id="extract-specific-numbers" class="section level1">
<h1 class="hasAnchor">
<a href="#extract-specific-numbers" class="anchor"></a>Extract specific numbers</h1>
<p>What if we just want the cell number from each image?</p>
<div id="the-nth-number" class="section level2">
<h2 class="hasAnchor">
<a href="#the-nth-number" class="anchor"></a>The <code>n</code><sup>th</sup> number</h2>
<p>We know the cell number is always the second number, so we can use the <code><a href="../reference/str_nth_number.html">str_nth_number()</a></code> function with <code>n = 2</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/str_nth_number.html">str_nth_number</a></span>(img_names, <span class="dt">n =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3</span></a></code></pre></div>
</div>
<div id="numbers-after-patterns" class="section level2">
<h2 class="hasAnchor">
<a href="#numbers-after-patterns" class="anchor"></a>Numbers after patterns</h2>
<p>To be more specific, you could say the cell number is the first number after the first instance of the word “cell”. To go this route, <code>strex</code> provides <code><a href="../reference/str_nth_number_after_mth.html">str_nth_number_after_mth()</a></code> which gives the <code>n</code><sup>th</sup> number after the <code>m</code><sup>th</sup> appearance of a given pattern:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/str_nth_number_after_mth.html">str_nth_number_after_mth</a></span>(img_names, <span class="st">"cell"</span>, <span class="dt">n =</span> <span class="dv">1</span>, <span class="dt">m =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3</span></a></code></pre></div>
<p>There’s also a convenient wrapper for getting the first number after the first appearance of a pattern:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/str_nth_number_after_mth.html">str_first_number_after_first</a></span>(img_names, <span class="st">"cell"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3</span></a></code></pre></div>
</div>
<div id="numbers-before-patterns" class="section level2">
<h2 class="hasAnchor">
<a href="#numbers-before-patterns" class="anchor"></a>Numbers before patterns</h2>
<p>Now what if we want the number of hours after biopsy for each image? Looking at the image file names, we’d need the last number <em>before</em> the first occurrence of the word “biopsy”.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/str_nth_number_before_mth.html">str_last_number_before_first</a></span>(img_names, <span class="st">"biopsy"</span>, <span class="dt">decimals =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt;  [1] 0.0 2.5 0.0 2.5 0.0 2.5 0.0 2.5 0.0 2.5 0.0 2.5</span></a></code></pre></div>
</div>
<div id="tidy-number-extraction" class="section level2">
<h2 class="hasAnchor">
<a href="#tidy-number-extraction" class="anchor"></a>Tidy number extraction</h2>
<p>To extract all of this information tidily, use a <code>tibble</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(img_names,</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  <span class="dt">patient =</span> <span class="kw"><a href="../reference/str_nth_number_after_mth.html">str_first_number_after_first</a></span>(img_names, <span class="st">"patient"</span>),</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  <span class="dt">cell =</span> <span class="kw"><a href="../reference/str_nth_number_after_mth.html">str_first_number_after_first</a></span>(img_names, <span class="st">"cell"</span>),</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">  <span class="dt">hrs_after_biop =</span> <span class="kw"><a href="../reference/str_nth_number_before_mth.html">str_last_number_before_first</a></span>(img_names, <span class="st">"biop"</span>, </a>
<a class="sourceLine" id="cb9-5" data-line-number="5">                                                <span class="dt">decimals =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; # A tibble: 12 x 4</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt;    img_names                                patient  cell hrs_after_biop</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt;    &lt;chr&gt;                                      &lt;dbl&gt; &lt;dbl&gt;          &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt;  1 patient1-cell1-0hours-after-biopsy.tif         1     1            0  </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt;  2 patient1-cell1-2.5hours-after-biopsy.tif       1     1            2.5</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt;  3 patient1-cell2-0hours-after-biopsy.tif         1     2            0  </span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt;  4 patient1-cell2-2.5hours-after-biopsy.tif       1     2            2.5</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt;  5 patient1-cell3-0hours-after-biopsy.tif         1     3            0  </span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt;  6 patient1-cell3-2.5hours-after-biopsy.tif       1     3            2.5</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt;  7 patient2-cell1-0hours-after-biopsy.tif         2     1            0  </span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt;  8 patient2-cell1-2.5hours-after-biopsy.tif       2     1            2.5</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt;  9 patient2-cell2-0hours-after-biopsy.tif         2     2            0  </span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt; 10 patient2-cell2-2.5hours-after-biopsy.tif       2     2            2.5</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"><span class="co">#&gt; 11 patient2-cell3-0hours-after-biopsy.tif         2     3            0  </span></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="co">#&gt; 12 patient2-cell3-2.5hours-after-biopsy.tif       2     3            2.5</span></a></code></pre></div>
</div>
<div id="other-number-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#other-number-formats" class="anchor"></a>Other number formats</h2>
<p><code>strex</code> can also deal with numbers in scientific and comma notation.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">string &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"$1,000"</span>, <span class="st">"$1e6"</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="../reference/str_nth_number.html">str_first_number</a></span>(string, <span class="dt">commas =</span> <span class="ot">TRUE</span>, <span class="dt">sci =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; [1] 1e+03 1e+06</span></a></code></pre></div>
</div>
</div>
<div id="all-of-the-number-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#all-of-the-number-functions" class="anchor"></a>All of the number functions</h1>
<p>There are a whole host of functions for extracting numbers from strings in the <code>strex</code> package:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">str_subset</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ls">ls</a></span>(<span class="st">"package:strex"</span>), <span class="st">"number"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt;  [1] "str_extract_numbers"           "str_first_number"             </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt;  [3] "str_first_number_after_first"  "str_first_number_after_last"  </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;  [5] "str_first_number_after_mth"    "str_first_number_before_first"</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;  [7] "str_first_number_before_last"  "str_first_number_before_mth"  </span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt;  [9] "str_last_number"               "str_last_number_after_first"  </span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; [11] "str_last_number_after_last"    "str_last_number_after_mth"    </span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt; [13] "str_last_number_before_first"  "str_last_number_before_last"  </span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; [15] "str_last_number_before_mth"    "str_nth_number"               </span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; [17] "str_nth_number_after_first"    "str_nth_number_after_last"    </span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; [19] "str_nth_number_after_mth"      "str_nth_number_before_first"  </span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; [21] "str_nth_number_before_last"    "str_nth_number_before_mth"    </span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; [23] "str_split_by_numbers"</span></a></code></pre></div>
</div>
<div id="regular-expression" class="section level1">
<h1 class="hasAnchor">
<a href="#regular-expression" class="anchor"></a>Regular expression</h1>
<p>Of course, all of the above is possible with regular expression using <code>stringr</code>, it’s just more difficult and less expressive:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(img_names,</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">  <span class="dt">patient =</span> <span class="kw">str_match</span>(img_names, <span class="st">"patient(</span><span class="ch">\\</span><span class="st">d+)"</span>)[, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="dt">cell =</span> <span class="kw">str_match</span>(img_names, <span class="st">"cell(</span><span class="ch">\\</span><span class="st">d+)"</span>)[, <span class="dv">2</span>],</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">  <span class="dt">hrs_after_biop =</span> <span class="kw">str_match</span>(img_names, <span class="st">"(</span><span class="ch">\\</span><span class="st">d*</span><span class="ch">\\</span><span class="st">.*</span><span class="ch">\\</span><span class="st">d+)hour"</span>)[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; # A tibble: 12 x 4</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt;    img_names                                patient cell  hrs_after_biop</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt;    &lt;chr&gt;                                    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;         </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;  1 patient1-cell1-0hours-after-biopsy.tif   1       1     0             </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt;  2 patient1-cell1-2.5hours-after-biopsy.tif 1       1     2.5           </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;  3 patient1-cell2-0hours-after-biopsy.tif   1       2     0             </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;  4 patient1-cell2-2.5hours-after-biopsy.tif 1       2     2.5           </span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  5 patient1-cell3-0hours-after-biopsy.tif   1       3     0             </span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;  6 patient1-cell3-2.5hours-after-biopsy.tif 1       3     2.5           </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;  7 patient2-cell1-0hours-after-biopsy.tif   2       1     0             </span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;  8 patient2-cell1-2.5hours-after-biopsy.tif 2       1     2.5           </span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;  9 patient2-cell2-0hours-after-biopsy.tif   2       2     0             </span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; 10 patient2-cell2-2.5hours-after-biopsy.tif 2       2     2.5           </span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt; 11 patient2-cell3-0hours-after-biopsy.tif   2       3     0             </span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt; 12 patient2-cell3-2.5hours-after-biopsy.tif 2       3     2.5</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#a-common-way-to-encode-numerical-data">A common way to encode numerical data</a></li>
      <li><a href="#all-of-the-numbers">All of the numbers</a></li>
      <li>
<a href="#extract-specific-numbers">Extract specific numbers</a><ul class="nav nav-pills nav-stacked">
<li><a href="#the-nth-number">The <code>n</code><sup>th</sup> number</a></li>
      <li><a href="#numbers-after-patterns">Numbers after patterns</a></li>
      <li><a href="#numbers-before-patterns">Numbers before patterns</a></li>
      <li><a href="#tidy-number-extraction">Tidy number extraction</a></li>
      <li><a href="#other-number-formats">Other number formats</a></li>
      </ul>
</li>
      <li><a href="#all-of-the-number-functions">All of the number functions</a></li>
      <li><a href="#regular-expression">Regular expression</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Rory Nolan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
